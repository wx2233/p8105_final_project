---
title: "clean_data"
author: "Guangling Xu"
date: "2019/11/10"
output: github_document
---

```{r}
library(tidyverse)
knitr::opts_chunk$set(
	echo = TRUE,
	warning = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)
options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)
scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
theme_set(theme_minimal() + theme(legend.position = "bottom"))
```

```{r}
data_2018 =
  read_csv("./data/2018data.csv") %>% 
  janitor::clean_names() 
newnames = colnames(data_2018) %>% 
  str_replace("number_of_","") 
names(data_2018) = newnames

data_2018 = data_2018 %>% 
  select(-zip_code, -on_street_name, -location, -cross_street_name, -off_street_name,-collision_id) %>% 
  separate(date, into = c("day_of_month", "month", "year"), sep="/") %>% 
  select(-year) %>% 
  separate(time, into = c("hour_of_day", "minute"), sep=":") 
  
data_2018 = data_2018 %>% mutate(
    day_of_month = as.numeric(day_of_month),
    month = as.numeric(month),
    hour_of_day = as.numeric(hour_of_day),
    minute = as.numeric(minute),
    latitude = replace_na(latitude, 0)
  ) %>% 
  filter(latitude != 0) %>% 
  arrange(vehicle_type_code_1)
  
```

